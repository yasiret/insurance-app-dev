/*
formBuilder - git@github.com:kevinchappell/formBuilder.git
Version: 1.6.0
Author: Kevin Chappell <kevin.b.chappell@gmail.com>
*/
"use strict";!function(e){var t=function(t,a){var r={theme:"fresh",labels:{off:"Off",on:"On"}},n=e.extend(r,a),i=e('<div class="kc-toggle"/>').insertAfter(t).append(t);i.toggleClass("on",t.is(":checked"));var c='<div class="kct-on">'+n.labels.on+"</div>",s='<div class="kct-off">'+n.labels.off+"</div>",o='<div class="kct-handle"></div>',l='<div class="kct-inner">'+c+o+s+"</div>";i.append(l),i.click(function(){t.attr("checked",!t.attr("checked")),e(this).toggleClass("on")})};e.fn.kcToggle=function(a){var r=this;return r.each(function(){var r=e(this);if(!r.data("kcToggle")){var n=new t(r,a);r.data("kcToggle",n)}})}}(jQuery),function(e){e.fn.formRender=function(t){var a=e(this),r={destroyTemplate:!0,container:!1},n={},i=e.extend(r,t);n.markup=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=arguments.length<=2||void 0===arguments[2]?"":arguments[2];t=n.attrString(t),a=Array.isArray(a)?a.join(""):a;var r=["input"],i=-1===r.indexOf(e)?"<"+e+" "+t+">"+a+"</"+e+">":"<"+e+" "+t+"/>";return i},n.fieldRender=function(t){var a="",r="",i="",c=n.parseAttrs(t.attributes),s=(c.description,e("option",t));c.id=c.name,"checkbox"!==c.type&&(c["class"]="form-control"),"hidden"!==c.type&&(r='<label for="'+c.id+'">'+c.label+"</label>"),delete c.label,delete c.description;var o=n.attrString(c);switch(c.type){case"textarea":case"rich-text":delete c.type,delete c.value,a=r+"<textarea "+o+"></textarea>";break;case"select":c.type=c.type.replace("-group",""),s.length&&s.each(function(e,t){var a=n.parseAttrs(t.attributes),r=n.attrString(a);i+="<option "+r+">"+t.innerHTML+"</option>"}),a=r+"<select "+o+">"+i+"</select>";break;case"checkbox-group":case"radio-group":c.type=c.type.replace("-group",""),delete c["class"],s.length&&!function(){var t=c.name+"[]";s.each(function(a,r){var s=e.extend(c,n.parseAttrs(r.attributes));s.name=t,s.id=c.id+"-"+a;var o=n.attrString(s);i+="<input "+o+' /> <label for="'+s.id+'">'+r.innerHTML+"</label><br>"})}(),a=r+'<div class="'+c.type+'-group">'+i+"</div>";break;case"text":case"password":case"email":case"hidden":case"date":case"autocomplete":a=r+" <input "+o+">";break;case"checkbox":a="<input "+o+"> "+r,c.toggle&&setTimeout(function(){e(document.getElementById(c.id)).kcToggle()},100);break;default:a="<"+c.type+"></"+c.type+">"}return"hidden"!==c.type&&(a=n.markup("div",{"class":"form-group"},a)),a},n.attrString=function(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(a+'="'+e[a]+'"');return t.join(" ")},n.parseAttrs=function(e){var t={};for(var a in e)e.hasOwnProperty(a)&&(t[e[a].nodeName]=e[a].nodeValue);return t},this.each(function(){var t=[],r=e.parseXML(a.val()),c=e("field",r);e("settings",r);if(!r)return alert("No formData. Add some fields and try again"),!1;c.length&&c.each(function(e,a){e=e,t.push(n.fieldRender(a))});var s=t.join("");i.container&&i.container.length?i.container.html(s):a.replaceWith(s)})}}(jQuery);